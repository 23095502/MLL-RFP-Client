export class OutputController {
  constructor($stateParams, $state, apiService, toaster) {
    'ngInject';

    this.$stateParams = $stateParams;
    this._api = apiService;
    this.gridData = [];
    this.outputdata = [];
    this.toaster = toaster;

    this.inproxiparam = {
      "ORIGIN": '',
      "ORIGINSTATE": '',
      "DESTINATION": '',
      "DESTINATIONSTATE": '',
      "VEHICLETYPE": '',
      "DISTANCE": 0,
      "NOOFTRIPS": 0
    }

    this.apptrans = {
      "RFPID": 1,
      "BANAME": "IVC",
      "APPROVEDAMOUNT": 5000,
      "FROMLOCATIONID": 1,
      "TOLOCATIONID": 2,
      "FROMSTATEID": 20,
      "TOSTATEID": 10,
      "VEHICLETYPEID": 2,
      "ACTIVE": "A",
      "CREATEDBY": "1",
      "CREATEDON": "2016-01-01 00:00:00"
    }

    this.urlMaps = {
      'contract': `${this._api.getHost()}/bacontract/Service.svc/getproximitybadata`,
      'backhaul': `${this._api.getHost()}/bacontract/Service.svc/dvprdata`,
      'rfphistory': `${this._api.getHost()}/RFPRest/RFPRestService.svc/rfphistory`,
      'cleansheet': ''
    };

    this.responseKeys = {
      'CONTRACTRATE': 'getproximitybadataResult',
      'PVSRFPRATE': 'rfphistoryResult',
      'BACKHAULAVL': 'dvprdataResult'
    };

    this.getTransactionData();
  }

  getTransactionData() {

    //this._api.get(`gettrans/${this.$stateParams.rfpId}`).then((res) => {
    //  this.outputdata = res.data;
      this.outputdata =[{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":3.80,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":4214.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":3,"FROMLOCATIONNAME":"MUMBAI","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":3040,"L2BANAME":"BLR","L2RATE":4250,"L3BANAME":"OKAY","L3RATE":4560,"L4BANAME":"BGFC","L4RATE":4940,"L5BANAME":"Jhanu","L5RATE":5390,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":2,"TOLOCATIONNAME":"PUNE","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":3,"VEHICLETYPENAME":"FULL BODY 2.5 MT\/3 MT 14 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":40217.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":33692.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":3,"FROMLOCATIONNAME":"MUMBAI","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":32170,"L2BANAME":"BLR","L2RATE":45040,"L3BANAME":"OKAY","L3RATE":48260,"L4BANAME":"BGFC","L4RATE":52280,"L5BANAME":"Jhanu","L5RATE":57110,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":39,"TOLOCATIONNAME":"COIMBATORE","TOSTATE":"TAMIL NADU","TOSTATECODE":"TN","TOSTATEID":3,"TOTALSPEND":0.00,"VEHICLETYPEID":47,"VEHICLETYPENAME":"CONTAINER 7-9 MT 18-22 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":4389.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":2986.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":3,"FROMLOCATIONNAME":"MUMBAI","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":3510,"L2BANAME":"BLR","L2RATE":4920,"L3BANAME":"OKAY","L3RATE":5270,"L4BANAME":"BGFC","L4RATE":5710,"L5BANAME":"Jhanu","L5RATE":6230,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":100,"TOLOCATIONNAME":"NASHIK","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":3,"VEHICLETYPENAME":"FULL BODY 2.5 MT\/3 MT 14 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":10915.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":7745.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":22,"FROMLOCATIONNAME":"NAGPUR","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":8730,"L2BANAME":"BLR","L2RATE":12220,"L3BANAME":"OKAY","L3RATE":13100,"L4BANAME":"BGFC","L4RATE":14190,"L5BANAME":"Jhanu","L5RATE":15500,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":2,"TOLOCATIONNAME":"PUNE","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":19,"VEHICLETYPENAME":"ACE\/PICKUP FULL BODY 0.8-1.2 MT 8 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":5652.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":6430.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":100,"FROMLOCATIONNAME":"NASHIK","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":4520,"L2BANAME":"BLR","L2RATE":6330,"L3BANAME":"OKAY","L3RATE":6780,"L4BANAME":"BGFC","L4RATE":7350,"L5BANAME":"Jhanu","L5RATE":8030,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":3,"TOLOCATIONNAME":"MUMBAI","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":13,"VEHICLETYPENAME":"FULL BODY 7-8 MT 19-22 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":5427.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":4170.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":100,"FROMLOCATIONNAME":"NASHIK","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":4340,"L2BANAME":"BLR","L2RATE":6080,"L3BANAME":"OKAY","L3RATE":6510,"L4BANAME":"BGFC","L4RATE":7060,"L5BANAME":"Jhanu","L5RATE":7710,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":544,"TOLOCATIONNAME":"CHAKAN","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":13,"VEHICLETYPENAME":"FULL BODY 7-8 MT 19-22 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":7.13,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":6363.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":5310.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":169,"FROMLOCATIONNAME":"KOLHAPUR","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":5090,"L2BANAME":"BLR","L2RATE":7130,"L3BANAME":"OKAY","L3RATE":7640,"L4BANAME":"BGFC","L4RATE":8270,"L5BANAME":"Jhanu","L5RATE":9040,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":544,"TOLOCATIONNAME":"CHAKAN","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":3,"VEHICLETYPENAME":"FULL BODY 2.5 MT\/3 MT 14 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":35862.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":29700.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":544,"FROMLOCATIONNAME":"CHAKAN","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":28690,"L2BANAME":"BLR","L2RATE":40170,"L3BANAME":"OKAY","L3RATE":43030,"L4BANAME":"BGFC","L4RATE":46620,"L5BANAME":"Jhanu","L5RATE":50920,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":20,"TOLOCATIONNAME":"MYSORE","TOSTATE":"KARNATAKA","TOSTATECODE":"KA","TOSTATEID":1,"TOTALSPEND":0.00,"VEHICLETYPEID":29,"VEHICLETYPENAME":"MULTI AXLE CONTAINER 14-16 MT 32 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":5427.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":4170.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":544,"FROMLOCATIONNAME":"CHAKAN","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":4340,"L2BANAME":"BLR","L2RATE":6080,"L3BANAME":"OKAY","L3RATE":6510,"L4BANAME":"BGFC","L4RATE":7060,"L5BANAME":"Jhanu","L5RATE":7710,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":100,"TOLOCATIONNAME":"NASHIK","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":13,"VEHICLETYPENAME":"FULL BODY 7-8 MT 19-22 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":3125.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":3045.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":544,"FROMLOCATIONNAME":"CHAKAN","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":2500,"L2BANAME":"BLR","L2RATE":3500,"L3BANAME":"OKAY","L3RATE":3750,"L4BANAME":"BGFC","L4RATE":4060,"L5BANAME":"Jhanu","L5RATE":4440,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":100,"TOLOCATIONNAME":"NASHIK","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":19,"VEHICLETYPENAME":"ACE\/PICKUP FULL BODY 0.8-1.2 MT 8 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":6363.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":5062.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":544,"FROMLOCATIONNAME":"CHAKAN","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":5090,"L2BANAME":"BLR","L2RATE":7130,"L3BANAME":"OKAY","L3RATE":7640,"L4BANAME":"BGFC","L4RATE":8270,"L5BANAME":"Jhanu","L5RATE":9040,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":169,"TOLOCATIONNAME":"KOLHAPUR","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":3,"VEHICLETYPENAME":"FULL BODY 2.5 MT\/3 MT 14 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":1694.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":3000.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":1355,"FROMLOCATIONNAME":"PIRANGUT","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":1360,"L2BANAME":"BLR","L2RATE":1900,"L3BANAME":"OKAY","L3RATE":2030,"L4BANAME":"BGFC","L4RATE":2200,"L5BANAME":"Jhanu","L5RATE":2410,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":1025,"TOLOCATIONNAME":"KOTHRUD","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":13,"VEHICLETYPENAME":"FULL BODY 7-8 MT 19-22 FT"},{"ACTIVE":"A","ADDRESS":"Pune","APPROVEDAMOUNT":0.00,"AVERAGELOAD":null,"BACKHAUL":0,"BACKHAULAVL":"Y","BACKHAULPERCENT":0.00,"BANAME":"","BAQUOTE":0.00,"CASHACCOUNTID":"ACCT00034","CLEANSHEETRATE":2938.00,"CONTACTNO":"9996663331","CONTACTPERSON":"John Doe","CONTRACTRATE":4500.00,"CUSTOMERNAME":"Cummins","CUSTTARGETRATE":null,"DISTANCE":0,"FREQUENCY":null,"FROMLOCATION":2099,"FROMLOCATIONNAME":"PHALTAN","FROMSTATE":"MAHARASHTRA","FROMSTATECODE":"MH","FROMSTATEID":2,"ISLOADUNLOADCHARG":null,"ISROUNDTRIP":null,"L1BANAME":"Sriddhi","L1RATE":2350,"L2BANAME":"BLR","L2RATE":3290,"L3BANAME":"OKAY","L3RATE":3530,"L4BANAME":"BGFC","L4RATE":3820,"L5BANAME":"Jhanu","L5RATE":4170,"LOADINGUNLOADINGTIME":0,"MARKETRATE":0.00,"MHEREQUIREMENT":null,"NOOFTRIPS":0,"OTHERREQUIREMENT":null,"PACKAGETYPEID":0,"PACKAGETYPENAME":null,"PACKDIMENSION":null,"PROXIDISTANCE":50.00,"PVSRFPRATE":0.00,"RESULT":null,"RFPDURATION":0,"RFPID":1,"RFPVOLUME":0,"SERVICETYPE":"FTL","SHIPXRATE":0.00,"STACKINGNORMS":null,"TOLOCATION":2,"TOLOCATIONNAME":"PUNE","TOSTATE":"MAHARASHTRA","TOSTATECODE":"MH","TOSTATEID":2,"TOTALSPEND":0.00,"VEHICLETYPEID":3,"VEHICLETYPENAME":"FULL BODY 2.5 MT\/3 MT 14 FT"}];
      //console.log(this.outputdata);

      var newOutputData = _.each(this.outputdata, (key, value) => {
        var L1RATE = this.outputdata[value].L1RATE;
        L1RATE = Math.round(L1RATE / 1000 * 100) / 100;
        this.outputdata[value].L1RATE = L1RATE;

        var L2RATE = this.outputdata[value].L2RATE;
        L2RATE = Math.round(L2RATE / 1000 * 100) / 100;
        this.outputdata[value].L2RATE = L2RATE;


        var L3RATE = this.outputdata[value].L3RATE;
        L3RATE = Math.round(L3RATE / 1000 * 100) / 100;
        this.outputdata[value].L3RATE = L3RATE;

        var L4RATE = this.outputdata[value].L4RATE;
        L4RATE = Math.round(L4RATE / 1000 * 100) / 100;
        this.outputdata[value].L4RATE = L4RATE;

        var L5RATE = this.outputdata[value].L5RATE;
        L5RATE = Math.round(L5RATE / 1000 * 100) / 100;
        this.outputdata[value].L5RATE = L5RATE;

      //})

      //this.nameoutputdata = this.outputdata[0];
      this.nameoutputdata = newOutputData;
      this.fromLocationOptions = _.uniqBy(this.outputdata, 'FROMLOCATIONNAME');
      this.routesGroupByLocation = _.groupBy(this.outputdata, 'FROMLOCATIONNAME');

      _.each(this.routesGroupByLocation, (vehiclelist, key) => {
        this.routesGroupByLocation[key] = _.uniqBy(vehiclelist, 'VEHICLETYPENAME');



      });

      this.filterOption = {
        FROMLOCATIONNAME: this.fromLocationOptions[0].FROMLOCATIONNAME,
        VEHICLETYPENAME: this.fromLocationOptions[0].VEHICLETYPENAME
      };

      this.vehicleTypeOptions = this.routesGroupByLocation[this.filterOption.FROMLOCATIONNAME];

    }, (err) => {
      console.error(err);
    });
  }

  ClearFilter() {
    this.filterOption = undefined;
  }

  getArray() {
    return _.map(this.outputdata, (v) => (_.pick(v, ['CUSTOMERNAME', 'CASHACCOUNTID', 'FROMLOCATIONNAME'])));
  }

  showModal(colname, table, clickedColName, headerColName, modalHeaderName) {

    this.selectedLane = table;
    this.rowClickedColName = clickedColName;

    /*
    this.inproxiparam.ORIGIN = this.filterOption.FROMLOCATIONNAME;
    this.inproxiparam.ORIGINSTATE = this.outputdata[index].FROMSTATE;
    this.inproxiparam.DESTINATION = this.outputdata[index].TOLOCATIONNAME;
    this.inproxiparam.DESTINATIONSTATE = this.outputdata[index].TOSTATE;
    this.inproxiparam.VEHICLETYPE = this.filterOption.VEHICLETYPENAME;
    this.inproxiparam.DISTANCE = this.outputdata[index].PROXIDISTANCE;
    this.inproxiparam.NOOFTRIPS = this.outputdata[index].NOOFTRIPS;
    */

    //console.log(table.DISTANCE);

    this.inproxiparam.ORIGIN = this.filterOption.FROMLOCATIONNAME;
    this.inproxiparam.ORIGINSTATE = table.FROMSTATE;
    this.inproxiparam.DESTINATION = table.TOLOCATIONNAME;
    this.inproxiparam.DESTINATIONSTATE = table.TOSTATE;
    this.inproxiparam.VEHICLETYPE = this.filterOption.VEHICLETYPENAME;
    this.inproxiparam.DISTANCE = table.PROXIDISTANCE;
    this.inproxiparam.NOOFTRIPS = table.NOOFTRIPS;

    this.gridData = [];
    var newfilterRoutes = {
      inproxiparam: this.inproxiparam
    };

    this.TOLOCATIONNAME = table.TOLOCATIONNAME;
    this.CONTRACTRATE = table[clickedColName];
    this.colName = headerColName;
    this.modalHeaderName = modalHeaderName;

    this._api.post(this.urlMaps[colname], newfilterRoutes, true).then((res) => {
      this.gridData = res.data[this.responseKeys[clickedColName]];
    }, (err) => {
      console.error(err);
    });

    $('#myModalOutputDetails').modal();
  }

  submit() {

    var revisedOutput = _.chain(this.outputdata).map((output) => {

      output.L1RATE = output.L1RATE * 1000;
      output.L2RATE = output.L2RATE * 1000;
      output.L3RATE = output.L3RATE * 1000;
      output.L4RATE = output.L4RATE * 1000;
      output.L5RATE = output.L5RATE * 1000;
      //output.CONTRACTRATE = output.CONTRACTRATE * 1000;
      //output.CLEANSHEETRATE = output.CLEANSHEETRATE * 1000;
      //output.PVSRFPRATE = output.PVSRFPRATE * 1000;
      //output.MARKETRATE = output.MARKETRATE * 1000;
      //output.SHIPXRATE = output.SHIPXRATE * 1000;

      output.MODE = 'APIRATE';

      output.CREATEDBY = 1;
      output.CREATEDON = '2016-03-01';
      delete output.$$hashKey;
      delete output.ADDRESS;
      delete output.AVERAGELOAD;
      delete output.BACKHAUL;
      delete output.BAQUOTE;
      delete output.BACKHAULPERCENT;
      delete output.CASHACCOUNTID;
      delete output.CONTACTNO;
      delete output.CONTACTPERSON;
      delete output.CUSTOMERNAME;
      delete output.CUSTTARGETRATE;
      delete output.DISTANCE;
      delete output.FREQUENCY;
      delete output.FROMLOCATIONNAME;
      delete output.FROMSTATE;
      delete output.FROMSTATECODE;
      delete output.ISLOADUNLOADCHARG;
      delete output.ISROUNDTRIP;
      delete output.L1BANAME;
      delete output.L2BANAME;
      delete output.L3BANAME;
      delete output.L4BANAME;
      delete output.L5BANAME;
      delete output.LOADINGUNLOADINGTIME;
      delete output.MHEREQUIREMENT;
      delete output.MODE;
      delete output.NOOFTRIPS;
      delete output.OTHERREQUIREMENT;
      delete output.PACKAGETYPEID;
      delete output.PACKAGETYPENAME;
      delete output.PACKDIMENSION;
      delete output.PROXIDISTANCE;
      delete output.RESULT;
      delete output.RFPDURATION;
      delete output.RFPVOLUME;
      delete output.SERVICETYPE;
      delete output.STACKINGNORMS;
      delete output.TOLOCATIONNAME;
      delete output.TOSTATE;
      delete output.TOSTATECODE;
      delete output.TOTALSPEND;
      delete output.VEHICLETYPENAME;
      return output;
    }).value();

    var newOutputDetails = {
      apptrans: revisedOutput
    };

    console.log(newOutputDetails);

    this._api.post('apptrans', newOutputDetails).then((res) => {
      this.getTransactionData();
      console.log(res.data);
    }, (err) => {
      console.error(err);
    });

    this.toaster.success('Changes saved successfully');

  }


  updateContractRate(popupGridData) {
    this.CONTRACTRATE = popupGridData.FREIGHTRATE;
    this.selectedLane[this.rowClickedColName] = popupGridData.FREIGHTRATE;
    $('#myModalOutputDetails').modal('hide');
  }

  changecolor(toMatch, approvedRate) {
    if (toMatch >= approvedRate) {
      return 'below';
    } else {
      return 'above';
    }
  }

  changeLocation() {

    this.vehicleTypeOptions = this.routesGroupByLocation[this.filterOption.FROMLOCATIONNAME];
    this.filterOption.VEHICLETYPENAME = this.vehicleTypeOptions[0].VEHICLETYPENAME;
    this.outputdata[0].CLEANSHEETRATE = this.outputdata[0].CLEANSHEETRATE / 1000;
  }


  export () {
    this._api.get('exportrfpout/1').then((res) => {
      window.open(res.data);
    }, (err) => {
      console.error(err);
    });
  }

  checkBackhaul() {

  }

  closeModal() {
    $('#myModalOutputDetails').modal('hide');
  }

}
